<html>

<head>
	<title>Note Pro</title>
	<meta charset=utf-8 />
	<link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" id="style-css">
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

	<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>
	<script>
		Handlebars.registerHelper('dateFormat', function (date) {
			return moment(date).fromNow();
		});

		Handlebars.registerHelper('importance', function (id, importance) {
			let importanceHtml = "";
			for (let i = 5; i > 0; i--) {
				importanceHtml += i <= importance ? getImportanceHtml('on', id, i) : getImportanceHtml('off', id, i);
			}
			return importanceHtml;
		});

		Handlebars.registerHelper('attr', function(setAttr, attr) {
    		return setAttr ? attr : '';
		});

		function getImportanceHtml(type, noteId, rate) {
			return "<i class='importance importance-" + type + "' data-note-id='"+noteId+"' data-rate='"+rate+"'></i>"
		}
	</script>
	<script id='notesTemplate' type='text/x-handlebars-template'> 
		{{#each notes}}
		<article class="note">
			<div class="note-finishdate">
				<span class="bx-finished">
					<input type="checkbox" id="cbx-finished" data-note-id="{{id}}" {{attr finished 'checked'}}>
				</span>
				{{dateFormat finishDate}}
			</div>
			<div class="note-importance">
				{{#importance id importance}}{{/importance}}
			</div>
			<div class="note-title {{attr finished 'strikethrough'}}">{{title}}
				<span class="btn-expand"></span>
			</div>
			<div class="note-content">
				<textarea class="note-text" rows="1" cols="10">{{content}}</textarea>
			</div>
			<div class="note-button">
				<button class="btn-edit">âœŽ</button>
			</div>
		</article>
		{{/each}}
	</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
</head>

<body>
	<div class="wrapper">
		<header class="header-bar">
			<div class="title">Note Pro</div>
			<button class="btn-create">+</button>
			<select id="style-selector" class="style-selector">
				<option value="pink">Pink-Style</option>
				<option value="blue">Blue-Style</option>
			</select>
		</header>
		<nav class="navbar">
			<button id="btn-sort-finishDate">By finish Date</button>
			<button id="btn-sort-createdDate">By created Date</button>
			<button id="btn-sort-importance">By Importance</button>

			<button id="btn-showFinished" class="btn-show-finished">Show finished</button>
		</nav>
		<section id="notes-content" class="notes">
		</section>
	</div>
	<script type="module" src="js/data.js"></script>
	<script type="module" src="js/model.js"></script>
	<script type="module" src="js/app.js"></script>
</body>

</html>